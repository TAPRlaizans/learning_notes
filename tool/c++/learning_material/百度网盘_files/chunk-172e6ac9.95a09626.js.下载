(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-172e6ac9"],{"265e":function(e,t,i){},"26fe":function(e,t,i){},"451b":function(e,t,i){},"7cba":function(e,t,i){"use strict";i("451b")},a32a:function(e,t,i){"use strict";i("26fe")},c1c4:function(e,t,i){"use strict";var a=i("0a4e"),s=i("9564"),n=i("79f8"),o=i("49fe"),r=i("8f1a"),l=(i("01e5"),i("6f8c"),function(){var e=this,t=e._self._c;return t("u-dialog",{staticClass:"nd-dialog-common-header",attrs:{title:"提示",width:"520px",visible:e.innerShow,lockScroll:!1},on:{"update:visible":function(t){e.innerShow=t},close:e.handleClose}},[t("div",{staticClass:"nd-dialog-common-body"},[t("p",[e._v("有"+e._s(e.listLength)+"个文件的源文件找不到了，操作未完成")])]),t("div",{staticClass:"nd-dialog-footer-center nd-dialog-common-footer",attrs:{slot:"footer"},slot:"footer"},[t("u-button",{staticClass:"nd-btn-fix-size-middle",attrs:{type:"primary",size:"medium",round:""},on:{click:e.handleClose}},[e._v("我知道了")])],1)])}),c=[],u=(i("c5f6"),{props:{show:{type:Boolean,default:!1},listLength:{type:Number,default:0},actionName:{type:String,default:""}},computed:{innerShow:{get:function(){return this.show&&!!this.listLength},set:function(e){this.$emit("update:show",e)}}},methods:{handleClose:function(){this.$emit("close")}}}),d={mixins:[u]},f=d,p=i("2877"),m=Object(p["a"])(f,l,c,!1,null,null,null),h=m.exports,_=function(){var e=this,t=e._self._c;return t("u-dialog",{staticClass:"nd-dialog-common-header",attrs:{title:"提示",width:"520px",lockScroll:!1,visible:e.innerShow},on:{"update:visible":function(t){e.innerShow=t}}},[t("div",{staticClass:"nd-dialog-common-body"},[t("p",[e._v("网络异常，"+e._s(e.listLength)+"个文件"+e._s(e.actionName||"操作")+"失败，是否重试？")])]),t("div",{staticClass:"nd-dialog-footer-center nd-dialog-common-footer",attrs:{slot:"footer"},slot:"footer"},[t("u-button",{staticClass:"nd-btn-fix-size-middle",attrs:{type:"primary",round:"",size:"medium"},on:{click:function(t){return t.stopPropagation(),e.handleRetry.apply(null,arguments)}}},[e._v("重试")]),t("u-button",{staticClass:"nd-second-primary-btn nd-btn-fix-size-middle",attrs:{round:"",type:"week",size:"medium"},on:{click:e.handleClose}},[e._v("取消")])],1)])},g=[],b={mixins:[u],methods:{handleRetry:function(){this.$emit("retry")}}},v=b,y=Object(p["a"])(v,_,g,!1,null,null,null),C=y.exports,w=function(){var e=this,t=e._self._c;return t("u-dialog",{staticClass:"nd-dialog-common-header nd-dialog-copy-repeat",attrs:{title:"重复".concat(e.fileTypeName,"提示"),width:"600px",lockScroll:!1,visible:e.innerShow},on:{"update:visible":function(t){e.innerShow=t}}},[t("div",{staticClass:"nd-file-manage__repeat-tip"},[t("p",{staticClass:"nd-file-manage__repeat-desc"},[e._v("\n            如选择生成副本，将以"+e._s(e.fileTypeName)+"名称加上序数的方式保存；未选择处理方式的"+e._s(e.fileTypeName)+"，将自动被跳过。\n        ")]),t("div",{staticClass:"nd-file-manage__repeat-body"},[t("div",{staticClass:"nd-file-manage__repeat-title theme-primary-text"},[t("p",{staticClass:"nd-file-manage__repeat-title-item"},[e._v("已有的"+e._s(e.fileTypeName))]),t("p",{staticClass:"nd-file-manage__repeat-title-item"},[e._v("正在"+e._s(e.actionName)+"的"+e._s(e.fileTypeName))])]),t("div",{staticClass:"nd-file-manage__repeat-items"},e._l(e.repeatList,(function(e){return t("repeat-item",{key:e.from.path,attrs:{item:e}})})),1)])]),t("div",{staticClass:"nd-dialog-common-footer",class:{"is-multi":e.listLength>1},attrs:{slot:"footer"},slot:"footer"},[e.listLength>1?t("div",{staticClass:"nd-file-manage__footer-repeat-set"},[t("u-radio-group",{model:{value:e.ondup,callback:function(t){e.ondup=t},expression:"ondup"}},[t("u-radio",{attrs:{label:"nothing"}},[e._v("全部跳过")]),e.isAllFile?t("u-radio",{staticClass:"nd-file-manage__footer-repeat-set-radio",attrs:{label:"overwrite"}},[e._v("全部覆盖")]):e._e(),t("u-radio",{staticClass:"nd-file-manage__footer-repeat-set-radio",attrs:{label:"newcopy"}},[e._v("全部生成副本")])],1)],1):e._e(),t("div",{staticClass:"nd-file-manage__footer-actions"},[t("u-button",{staticClass:"nd-second-primary-btn nd-btn-fix-size-middle",attrs:{round:"",type:"week",size:"medium"},on:{click:e.handleClose}},[e._v("取消")]),t("u-button",{staticClass:"nd-btn-fix-size-middle",attrs:{type:"primary",round:"",size:"medium"},on:{click:function(t){return t.stopPropagation(),e.handleTryRepeat.apply(null,arguments)}}},[e._v("确定")])],1)])])},k=[],L=(i("ac6a"),i("a8fc")),x=i.n(L),S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"nd-file-manage__repeat-item"},[t("div",{staticClass:"nd-file-manage__repeat-item-compare"},[t("compare-item",{attrs:{item:e.item.to}}),t("div",{staticClass:"nd-file-manage__repeat-compare-separator absolute-vh-center"}),t("compare-item",{attrs:{item:e.item.from}})],1),t("div",{staticClass:"nd-file-manage__repeat-item-action"},[t("u-radio-group",{model:{value:e.item.ondup,callback:function(t){e.$set(e.item,"ondup",t)},expression:"item.ondup"}},[t("u-radio",{attrs:{label:"nothing"}},[e._v("跳过本组")]),e.isAllFile?t("u-radio",{staticClass:"nd-file-manage__repeat-item-action-radio",attrs:{label:"overwrite"}},[e._v("覆盖文件")]):e._e(),t("u-radio",{staticClass:"nd-file-manage__repeat-item-action-radio",attrs:{label:"newcopy"}},[e._v("生成副本")])],1)],1)])},N=[],I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"nd-file-manage__repeat-compare-item"},[t("img",{staticClass:"nd-file-manage__repeat-compare-icon img-before-icon iconfont icon-pure-color",class:e.item.thumbnail?"is-thumb":"",attrs:{src:e.item.thumbnail||e.item.categoryImage}}),t("div",{staticClass:"nd-file-manage__repeat-compare-body"},[t("p",{staticClass:"nd-file-manage__repeat-compare-title text-elip"},[e._v(e._s(e.item.formatName))]),t("p",{staticClass:"nd-file-manage__repeat-compare-desc"},[e.item.isdir?e._e():t("span",{staticClass:"nd-file-manage__repeat-compare-size"},[e._v(e._s(e.item.formatSize))]),t("span",[e._v(e._s(e.item.formatTime))])])])])},T=[],F={props:{item:{type:Object,default:function(){return{}}}}},M=F,$=(i("a32a"),Object(p["a"])(M,I,T,!1,null,null,null)),z=$.exports,O={components:{compareItem:z},props:{item:{type:Object,default:function(){return{}}}},computed:{isSameType:function(){var e=this.item,t=e.from,i=e.to;return t.isdir===i.isdir},isAllFile:function(){var e=this.item.from;return this.isSameType&&0===e.isdir}}},A=O,j=(i("7cba"),Object(p["a"])(A,S,N,!1,null,null,null)),P=j.exports,R={mixins:[u],components:{repeatItem:P},props:{repeatList:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{isAllFile:function(){return this.repeatList.every((function(e){var t=e.from,i=e.to;return t.isdir===i.isdir&&0===t.isdir}))},isAllFolder:function(){return this.repeatList.every((function(e){var t=e.from,i=e.to;return t.isdir===i.isdir&&1===t.isdir}))},fileTypeName:function(){return this.isAllFolder?"文件夹":"文件"},ondup:{get:function(){var e=x()(this.repeatList,"ondup");return 1!==e.length?"":e[0].ondup},set:function(e){this.handleAllRepeatSet(e)}}},methods:{handleTryRepeat:function(){this.$emit("try-repeat",this.repeatList)},handleAllRepeatSet:function(e){this.repeatList.forEach((function(t){t.ondup=e}))}}},D=R,X=(i("f7728"),Object(p["a"])(D,w,k,!1,null,null,null)),B=X.exports;t["a"]={mixins:[a["a"],s["a"],n["a"]],components:{notFoundComp:h,defaultErr:C,fileRepeat:B},data:function(){return{errorMsgMap:o["c"],notFoundList:[],otherFailList:[],repeatList:[],showNotFountTip:!1,showErrTip:!1,showRepeatTip:!1,MIXIN__verifyInfo:null}},computed:{yunData:function(){return this.ctx.yunData||{}}},methods:{closePlugin:function(){var e=this;this.$nextTick((function(){e.__closePlugin()}))},handleNotFountClose:function(){this.$emit("reload-list"),this.closePlugin()},successCb:function(e){if(this.$bus.$emit("fileManageDone",!0),"function"===typeof this.coverSuccesslCb)return this.coverSuccesslCb();this.$Message({message:e||this.successMsg,type:"success"}),this.$emit("reload-list"),this.closePlugin()},failCb:function(e){if(e||(e="文件".concat(this.actionName||"操作","失败，请稍后再试")),"function"===typeof this.coverFailCb)return this.coverFailCb(e,this.doManage,this.copyParams);this.failMsg(e,this.userInfo),this.loading=!1,this.closePlugin()},pollTask:function(e,t){var i=this,a=Object(r["a"])();this.loading=!0,a(e,t).then((function(e){i.loading=!1;var t=e.errno;if(31180!==e.task_errno)switch(t){case 0:i.successCb();break;case 1:if(-32===e.task_errno){if(i.newStyleTest&&1===i.newStyleTest){var a="vipGuidanceFive-plugin@com.baidu.pan";return void i.$callPlugin({pluginNameAtGroup:a,currentFileMeta:[],otherParam:{guidanceData:{type:1,path:"/buy/guide/cashier",params:{scene_id:1,from:"copy"}}}})}i.failCb(e.task_errno),i.$LogBpData.buyGuideCashierAction.buyGuideCashierClk.send({ext:{newStyle:i.newStyleTest,sceneId:1,from:"copy"}})}else i.processErrList(e.list||[]);break;default:i.failCb(e.show_msg);break}else i.failCb(e.task_errno)})).catch((function(e){console.warn(e),i.failCb()}))},doManage:function(e,t,i,a){var s=this,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.notFoundList=[],this.otherFailList=[],this.repeatList=[],this.loading=!0;var r=this.yunData.bdstoken,l={opera:e,bdstoken:r};"function"===typeof this.loadingCb&&this.loadingCb(),l=Object.assign({},l,n),a&&"enterprise"===a.type&&(l=Object.assign({},l,a),l.opera="import",l.tocid=a.cid);var c=o["i"];this.outManageFile&&(c=this.outManageFile),this.$LogBpData.fileManagerLog.fileOpreation.send({ext:{action:e,fileList:t,retry:i}}),c(l,t).then((function(i){s.loading=!1;var n=i.errno;switch(n){case 0:i.taskid?s.pollTask(i.taskid,a):s.successCb();break;case 12:s.failCb(i.show_msg||i.errno);break;case 3010:s.failCb(i.show_msg);break;case 3011:s.failCb(i.show_msg);break;case 132:s.MIXIN__passVerify(i.authwidget);break;case 90003:s.failCb("暂无文件夹管理权限，不支持此操作");break;default:s.failCb(i.errno);break}s.$LogBpData.fileManagerLog.fileOpreationResult.send({ext:{action:e,errno:n,msg:i.show_msg||"",fileList:t}})})).catch((function(e){s.failCb()}))},MIXIN__passVerify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.safetpl,i=e.saferand,a=e.safesign;t&&i&&a&&(this.MIXIN__verifyInfo={safetpl:t,saferand:i,safesign:a})},MIXIN__closeVerify:function(){this.MIXIN__verifyInfo=null}}}},f7728:function(e,t,i){"use strict";i("265e")}}]);